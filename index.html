<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="styles.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css">
	<title>Nick Walker Portfolio</title>
	<link rel="stylesheet" href="styles.css">
	<link rel="preload" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css" as="style">
	<link rel="preload" href="/img/bf.gif" as="image">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css">

	<!-- Preload and defer external scripts -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" defer></script>
	<script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js" defer></script>
	<script src="https://unpkg.com/@barba/core" defer></script>
	<script src="/gsap/SplitText.min.js" defer></script>
</head>
<body data-barba="wrapper">
	<div class="cursor"></div>

	<section class="navigation">
		<div class="inner-nav">
			<div class="left-nav">
				<a class="flex-nav-icon" href="/">
					<img class="pin hover-this" src="/img/bf.gif" alt="">Los Angeles
				</a>
			</div>
			<div class="right-nav">
				<img src="/img/mail.png" alt="">
			</div>
		</div>
	</section>

	<div data-barba="container" data-barba-namespace="home">
		<div data-scroll-container data-scroll>
			<div class="about-section">
				<div class="about">
					<p>I'm Nick Walker, a front-end developer and designer based in Los Angeles. <img src="/img/giphy.webp" alt=""> I specialize in crafting responsive designs that look stunning across all devices. As a lead developer at an agency, I manage a talented team <img src="/img/GW7eKwEzQilP2.gif" alt=""> while also staying hands-on with coding, building sleek, high-performance websites. <img src="/img/200w.gif" alt=""> My passion lies in creating beautiful, functional designs that offer a seamless user experience.</p>
				</div>
			</div>

			<div class="video-player video-player-load">
				<div class="video-width">
					<video muted playsinline loop autoplay>
						<source src="/video/milk.mp4" type="video/mp4">
						Your browser does not support the video tag.
					</video>
				</div>
			</div>

			<div class="pad50 mb100">
				<div class="flex-titles">
					<h3 class="video-description">Milk & Butter</h3>
					<a class="hover-this" href="/milk-and-butter/index.html">
						<span>
							<h2 class="view-project">View Project</h2>
						</span>
					</a>
				</div>
			</div>

			<div class="video-player black">
				<div class="video-width">
					<video muted playsinline loop autoplay preload="none">
						<source src="/video/construction-intro.mp4" type="video/mp4">
						Your browser does not support the video tag.
					</video>
				</div>
			</div>

			<div class="pad50 mb100">
				<div class="flex-titles">
					<h3 class="video-description">Evergreen Construction</h3>
					<a class="hover-this" href="/evergreen/index.html">
						<h2 class="view-project">View Project</h2>
					</a>
				</div>
			</div>

			<div class="video-player peach">
				<div class="video-width">
					<video muted playsinline loop autoplay preload="none">
						<source src="/video/empire-intro.mp4" type="video/mp4">
						Your browser does not support the video tag.
					</video>
				</div>
			</div>

			<div class="pad50 mb100">
				<div class="flex-titles">
					<h3 class="video-description">Plastic Surgery Center</h3>
					<a class="hover-this" href="/plastic-surgery/index.html">
						<h2 class="view-project">View Project</h2>
					</a>
				</div>
			</div>

			<div class="video-player espresso">
				<div class="video-width">
					<video muted playsinline loop autoplay preload="none">
						<source src="/video/product-intro.mp4" type="video/mp4">
						Your browser does not support the video tag.
					</video>
				</div>
			</div>

			<div class="pad50 mb100">
				<div class="flex-titles">
					<h3 class="video-description">Jason Neeman Photography</h3>
					<a class="hover-this" href="/photography/index.html">
						<h2 class="view-project">View Project</h2>
					</a>
				</div>
			</div>

			<div class="video-player slate">
				<div class="video-width">
					<video muted playsinline loop autoplay preload="none">
						<source src="/video/new-intro.mp4" type="video/mp4">
						Your browser does not support the video tag.
					</video>
				</div>
			</div>

			<div class="pad50 mb100 ">
				<div class="flex-titles">
					<h3 class="video-description">Medical Spa</h3>
					<a class="hover-this" href="/medspa/index.html">
						<h2 class="view-project">View Project</h2>
					</a>
				</div>
			</div>

			<div class="footer">
				<div class="flex-footer">
					<div class="flex-item-footer">
						<p class="connect-text">Lets talk. Start a conversation!
						</p>
					</div>
					<div class="flex-item-footer">
						<p class="flex-pin"><span><img src="/img/pin.png" alt=""></span>Los Angeles</p>
						<p class="flex-pin"><span><img src="/img/mail.jpg" alt=""></span>nickwalker@nickwalkerdev.com</p>
						<p class="flex-pin"><span><img src="/img/phone.jpg" alt=""></span>(747) 203-5361</p>
						<p class="flex-pin"><span><img src="/img/linkden.jpg" alt=""></span>LinkedIn</p>
					</div>
				</div>
			</div>

			
		</div>
	</div>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
    const scroll = new LocomotiveScroll({
        el: document.querySelector("[data-scroll-container]"),
        smooth: true,
        multiplier: 0.9,
    });

    gsap.registerPlugin(ScrollTrigger);
    ScrollTrigger.scrollerProxy("[data-scroll-container]", {
        scrollTop(value) {
            return arguments.length ? scroll.scrollTo(value, 0, 0) : scroll.scroll.instance.scroll.y;
        },
        getBoundingClientRect() {
            return {top: 0, left: 0, width: window.innerWidth, height: window.innerHeight};
        },
        pinType: document.querySelector("[data-scroll-container]").style.transform ? "transform" : "fixed"
    });

    scroll.on("scroll", ScrollTrigger.update);
    ScrollTrigger.addEventListener("refresh", () => scroll.update());

    let childSplit = new SplitText(".split", {
        type: "lines",
        linesClass: "split-child"
    });
    let parentSplit = new SplitText(".split", {
        type: "lines",
        linesClass: "split-parent"
    });

    gsap.from(childSplit.lines, {
        duration: 1.5,
        yPercent: 100,
        delay: 0.3,
        ease: "power4",
        stagger: 0.1,
        scrollTrigger: {
            trigger: ".split",
            scroller: "[data-scroll-container]",
            start: "top 80%",
            toggleActions: "play none none none"
        }
    });

    let aboutSplit = new SplitText(".about p", {
        type: "lines",
        linesClass: "split-child"
    });

    let aboutParentSplit = new SplitText(".about p", {
        type: "lines",
        linesClass: "split-parent"
    });

    gsap.from(aboutSplit.lines, {
        duration: 1.2,
        yPercent: 100,
        ease: "power3.out",
        stagger: 0.07,
        scrollTrigger: {
            trigger: ".about-section",
            scroller: "[data-scroll-container]",
            start: "top 80%",
            toggleActions: "play none none none"
        }
    });

    gsap.fromTo(".video-width video", 
        { scale: 0.5 }, 
        { 
            scale: 1,
            scrollTrigger: {
                trigger: ".video-player",
                scroller: "[data-scroll-container]",
                start: "top bottom",
                end: "top top",
                scrub: true,
            }
        }
    );

    const videos = document.querySelectorAll("video");

    const loadVideo = (video) => {
        const source = video.querySelector('source');
        const dataSrc = source.getAttribute('src');
        if (dataSrc) {
            source.setAttribute('src', dataSrc);
            video.load();
        }
    };

    const videoObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const video = entry.target;
                loadVideo(video);
                observer.unobserve(video);
            }
        });
    }, {
        rootMargin: '0px 0px 200px 0px',
        threshold: 0.25
    });

    videos.forEach(video => {
        videoObserver.observe(video);
    });

    videos.forEach(video => {
        ScrollTrigger.create({
            trigger: video,
            scroller: "[data-scroll-container]",
            start: "top 80%",
            onEnter: () => video.play(),
            onLeave: () => video.pause(),
            onEnterBack: () => video.play(),
            onLeaveBack: () => video.pause(),
        });
    });

    ScrollTrigger.refresh();

    barba.init({
        transitions: [{
            name: 'opacity-transition',
            leave(data) {
                return gsap.to(data.current.container, {
                    opacity: 0
                });
            },
            enter(data) {
                return gsap.from(data.next.container, {
                    opacity: 0
                });
            }
        }]
    });

    (function () {
        const links = document.querySelectorAll('.hover-this');
        const cursor = document.querySelector('.cursor');
        const cursorSize = 15;

        const animateCursor = function (e) {
            if (e.type === 'mouseenter') {
                cursor.classList.add('cursor-enlarge');
            } else if (e.type === 'mouseleave') {
                cursor.classList.remove('cursor-enlarge');
            }
        };

        const editCursor = e => {
            const { clientX: x, clientY: y } = e;
            const offset = cursor.offsetWidth / 2;
            cursor.style.left = `${x - offset}px`;
            cursor.style.top = `${y - offset}px`;
        };

        links.forEach(link => {
            link.addEventListener('mouseenter', animateCursor);
            link.addEventListener('mouseleave', animateCursor);
        });

        window.addEventListener('mousemove', editCursor);
    })();
});

	</script>
</body>
</html>
